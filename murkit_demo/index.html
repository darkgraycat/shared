<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Murkit demo</title>
    <script type="text/javascript" src="dist/main.js"></script>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            color: #d0d0d0;
            background-color: #202020;
        }
        #content {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        canvas {
            image-rendering: crisp-edges;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        /* Landscape mode styles */
        @media (orientation: landscape) and (max-height: 500px) {
            #content {
                transform: rotate(90deg);
                transform-origin: center center;
                width: 100vh;
                height: 100vw;
                position: absolute;
                top: 50%;
                left: 50%;
                margin-top: -50vw;
                margin-left: -50vh;
            }
        }
    </style>
</head>
<body>
    <div id="content">
        <!-- Your game canvas will be inserted here -->
    </div>

    <script>
        const content = document.getElementById('content');
        let isFullscreen = false;

        function enterFullscreen() {
            if (!document.fullscreenElement && !isFullscreen) {
                if (document.documentElement.requestFullscreen) {
                    document.documentElement.requestFullscreen();
                } else if (document.documentElement.mozRequestFullScreen) {
                    document.documentElement.mozRequestFullScreen();
                } else if (document.documentElement.webkitRequestFullscreen) {
                    document.documentElement.webkitRequestFullscreen();
                } else if (document.documentElement.msRequestFullscreen) {
                    document.documentElement.msRequestFullscreen();
                }
                isFullscreen = true;
            }
        }

        function handleResize() {
            // Adjust content size and position
            const isLandscape = window.matchMedia("(orientation: landscape) and (max-height: 500px)").matches;
            if (isLandscape) {
                content.style.width = window.innerHeight + 'px';
                content.style.height = window.innerWidth + 'px';
                content.style.marginTop = (-window.innerWidth / 2) + 'px';
                content.style.marginLeft = (-window.innerHeight / 2) + 'px';
            } else {
                content.style.width = '100%';
                content.style.height = '100%';
                content.style.marginTop = '0';
                content.style.marginLeft = '0';
            }
            console.log('Window resized');
        }

        // Enter fullscreen on first tap/click
        document.addEventListener('click', enterFullscreen, { once: true });
        document.addEventListener('touchstart', enterFullscreen, { once: true });

        window.addEventListener('resize', handleResize);
        window.addEventListener('orientationchange', handleResize);

        // Initial call to set correct size and position
        handleResize();

        // Lock orientation to landscape on mobile devices (if supported)
        if (screen.orientation && screen.orientation.lock) {
            screen.orientation.lock('landscape').catch((error) => {
                console.log('Unable to lock screen orientation:', error);
            });
        }
    </script>
</body>
</html>
